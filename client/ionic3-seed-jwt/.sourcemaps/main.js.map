{"version":3,"sources":["../../src/providers/auth-service.ts","../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/app/config.ts","../../src/providers/books-service.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import {Injectable} from '@angular/core';\r\nimport {Http} from '@angular/http';\r\nimport {Storage} from '@ionic/storage';\r\nimport 'rxjs/add/operator/toPromise';\r\nimport {UserModel} from '../models/user.model';\r\nimport {CredentialsModel} from '../models/credentials.model';\r\nimport {AuthHttp, JwtHelper, tokenNotExpired} from 'angular2-jwt';\r\nimport {Observable} from 'rxjs/Rx';\r\nimport *  as AppConfig from '../app/config';\r\n\r\n@Injectable()\r\nexport class AuthService {\r\n\r\n  private cfg: any;\r\n  idToken: string;\r\n  refreshSubscription: any;\r\n\r\n\r\n  constructor(\r\n    private storage: Storage,\r\n    private http: Http,\r\n    private jwtHelper:JwtHelper,\r\n    private authHttp: AuthHttp) {\r\n\r\n    this.cfg = AppConfig.cfg;\r\n    this.storage.get('id_token').then(token => {\r\n        this.idToken = token;\r\n    });\r\n\r\n  }\r\n\r\n  register(userData: UserModel) {\r\n\r\n    return this.http.post(this.cfg.apiUrl + this.cfg.user.register, userData)\r\n      .toPromise()\r\n      .then(data => {\r\n        this.saveData(data)\r\n        let rs = data.json();\r\n        this.idToken = rs.token;\r\n        this.scheduleRefresh();\r\n      })\r\n      .catch(e => console.log(\"reg error\", e));\r\n\r\n\r\n  }\r\n\r\n  login(credentials: CredentialsModel) {\r\n\r\n    return this.http.post(this.cfg.apiUrl + this.cfg.user.login, credentials)\r\n      .toPromise()\r\n      .then(data => {\r\n          let rs = data.json();\r\n         this.saveData(data);\r\n         this.idToken = rs.token;\r\n         this.scheduleRefresh();\r\n      })\r\n      .catch(e => console.log('login error', e));\r\n\r\n\r\n  }\r\n\r\n  saveData(data: any) {\r\n\r\n    let rs = data.json();\r\n\r\n    this.storage.set(\"user\", rs.user);\r\n    this.storage.set(\"id_token\", rs.token);\r\n  }\r\n\r\n  logout() {\r\n    // stop function of auto refesh\r\n    this.unscheduleRefresh();\r\n    this.storage.remove('user');\r\n    this.storage.remove('id_token');\r\n\r\n  }\r\n\r\n  isValid() {\r\n    return tokenNotExpired();\r\n  }\r\n\r\n\r\n  public getNewJwt() {\r\n     // Get a new JWT from Auth0 using the refresh token saved\r\n     // in local storage\r\n    this.storage.get(\"id_token\").then((thetoken)=>{\r\n\r\n      let  senddata: { Token:string} = {\r\n           Token : thetoken\r\n        };\r\n\r\n        this.http.get(this.cfg.apiUrl + this.cfg.user.refresh+\"?Token=\"+thetoken)\r\n         .map(res => res.json())\r\n         .subscribe(res => {\r\n           console.log(JSON.stringify(res));\r\n           console.log(res.status);\r\n           // If the API returned a successful response, mark the user as logged in\r\n           // this need to be fixed on Laravel project to retun the New Token ;\r\n            if(res.status == 'success') {\r\n                   this.storage.set(\"id_token\", res.token);\r\n\r\n             } else {\r\n               console.log(\"The Token Black Listed\");\r\n               this.logout();\r\n\r\n            }\r\n         }, err => {\r\n           console.error('ERROR', err);\r\n          });\r\n\r\n       });\r\n\r\n   }\r\n\r\n\r\n  public scheduleRefresh() {\r\n  // If the user is authenticated, use the token stream\r\n  // provided by angular2-jwt and flatMap the token\r\n\r\n  let source = Observable.of(this.idToken).flatMap(\r\n    token => {\r\n      // The delay to generate in this case is the difference\r\n      // between the expiry time and the issued at time\r\n      let jwtIat = this.jwtHelper.decodeToken(token).iat;\r\n      let jwtExp = this.jwtHelper.decodeToken(token).exp;\r\n      let iat = new Date(0);\r\n      let exp = new Date(0);\r\n\r\n      let delay = (exp.setUTCSeconds(jwtExp) - iat.setUTCSeconds(jwtIat));\r\n      console.log(\"will start refresh after :\",(delay/1000)/60);\r\n      if(delay-1000<=0)\r\n      delay = 1;\r\n      return Observable.interval(delay);\r\n    });\r\n\r\n  this.refreshSubscription = source.subscribe(() => {\r\n    this.getNewJwt();\r\n  });\r\n}\r\n\r\n\r\n\r\npublic startupTokenRefresh() {\r\n    // If the user is authenticated, use the token stream\r\n    // provided by angular2-jwt and flatMap the token\r\n\r\n    this.storage.get(\"id_token\").then((thetoken)=>{\r\n\r\n      if(thetoken){\r\n\r\n        let source = Observable.of(thetoken).flatMap(\r\n          token => {\r\n            // Get the expiry time to generate\r\n            // a delay in milliseconds\r\n            let now: number = new Date().valueOf();\r\n            let jwtExp: number = this.jwtHelper.decodeToken(token).exp;\r\n            let exp: Date = new Date(0);\r\n            exp.setUTCSeconds(jwtExp);\r\n            let delay: number = exp.valueOf() - now;\r\n\r\n            if(delay <= 0) {\r\n              delay=1;\r\n            }\r\n             // Use the delay in a timer to\r\n            // run the refresh at the proper time\r\n            return Observable.timer(delay);\r\n          });\r\n\r\n         // Once the delay time from above is\r\n         // reached, get a new JWT and schedule\r\n         // additional refreshes\r\n         source.subscribe(() => {\r\n           this.getNewJwt();\r\n           this.scheduleRefresh();\r\n         });\r\n\r\n      }else{\r\n        //there is no user logined\r\n        console.info(\"there is no user logined \");\r\n\r\n      }\r\n\r\n    });\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\npublic unscheduleRefresh() {\r\n// Unsubscribe fromt the refresh\r\nif (this.refreshSubscription) {\r\nthis.refreshSubscription.unsubscribe();\r\n}\r\n}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth-service.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 148;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 148\n// module chunks = 8","var map = {\n\t\"../pages/book-add-page/book-add-page.module\": [\n\t\t580,\n\t\t4\n\t],\n\t\"../pages/book-edit-page/book-edit-page.module\": [\n\t\t581,\n\t\t3\n\t],\n\t\"../pages/book-info-page/book-info-page.module\": [\n\t\t582,\n\t\t2\n\t],\n\t\"../pages/books-page/books-page.module\": [\n\t\t583,\n\t\t1\n\t],\n\t\"../pages/forgot-page/forgot-page.module\": [\n\t\t584,\n\t\t7\n\t],\n\t\"../pages/login-page/login-page.module\": [\n\t\t585,\n\t\t6\n\t],\n\t\"../pages/profile-page/profile-page.module\": [\n\t\t586,\n\t\t0\n\t],\n\t\"../pages/register-page/register-page.module\": [\n\t\t587,\n\t\t5\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 191;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 191\n// module chunks = 8","export let cfg = {\r\n  apiUrl: 'http://localhost:8000/api',\r\n  tokenName: 'token',\r\n  user: {\r\n    register: '/auth/signup',\r\n    login: '/auth/login',\r\n    refresh:'/refresh',\r\n  },\r\n  books: '/books'\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/config.ts","import {Injectable} from '@angular/core';\r\nimport {AuthHttp} from 'angular2-jwt';\r\nimport {BookModel} from '../models/book.model';\r\nimport 'rxjs/add/operator/map';\r\nimport 'rxjs/add/operator/toPromise';\r\nimport *  as AppConfig from '../app/config';\r\n\r\n@Injectable()\r\nexport class BooksService {\r\n\r\n  private cfg: any;\r\n\r\n  constructor(\r\n    private authHttp: AuthHttp) {\r\n\r\n    this.cfg = AppConfig.cfg;\r\n  }\r\n\r\n  getAll() {\r\n    return this.authHttp.get(this.cfg.apiUrl + this.cfg.books)\r\n      .toPromise()\r\n      .then(rs => {\r\n        return rs.json();\r\n      });\r\n  }\r\n\r\n  getOne(id: number) {\r\n    return this.authHttp.get(this.cfg.apiUrl + this.cfg.books + '/' + id)\r\n      .toPromise()\r\n      .then(rs => {\r\n        console.log(rs, rs.json());\r\n        return rs.json().book;\r\n      });\r\n  }\r\n\r\n  add(book: BookModel) {\r\n    return this.authHttp.post(this.cfg.apiUrl + this.cfg.books, book)\r\n      .toPromise()\r\n      .then(() => {\r\n        return true;\r\n      })\r\n      .catch(e => console.log(\"create book error\", e));\r\n  }\r\n\r\n  update(book: BookModel) {\r\n    return this.authHttp.put(this.cfg.apiUrl + this.cfg.books + '/' + book.id, book)\r\n      .toPromise()\r\n      .then(rs => {\r\n        console.log(rs, rs.json());\r\n        return rs.json();\r\n      })\r\n      .catch(e => console.log(\"update book error\", e));\r\n  }\r\n\r\n  remove(id: number) {\r\n    return this.authHttp.delete(this.cfg.apiUrl + this.cfg.books + '/' + id)\r\n      .toPromise()\r\n      .then(rs => {\r\n        console.log(rs, rs.json());\r\n        return rs.json();\r\n      })\r\n      .catch(e => console.log(\"delete book error\", e));\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/books-service.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app.module';\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import {BrowserModule} from '@angular/platform-browser';\r\nimport {ErrorHandler, NgModule} from '@angular/core';\r\nimport {IonicApp, IonicErrorHandler, IonicModule} from 'ionic-angular';\r\nimport {IonicStorageModule} from '@ionic/storage';\r\nimport {MyApp} from './app.component';\r\nimport {HttpModule, Http} from '@angular/http';\r\nimport {AuthHttp, AuthConfig,JwtHelper} from 'angular2-jwt';\r\nimport {Storage} from '@ionic/storage';\r\nimport {AuthService} from '../providers/auth-service';\r\nimport {BooksService} from '../providers/books-service';\r\nimport {TranslateModule, TranslateLoader} from '@ngx-translate/core';\r\nimport {TranslateHttpLoader} from '@ngx-translate/http-loader';\r\n\r\nimport {StatusBar} from '@ionic-native/status-bar';\r\nimport {SplashScreen} from '@ionic-native/splash-screen';\r\n\r\nlet storage = new Storage({});\r\n\r\nexport function getAuthHttp(http) {\r\n  return new AuthHttp(new AuthConfig({\r\n    noJwtError: true,\r\n    globalHeaders: [{'Accept': 'application/json'}],\r\n    tokenGetter: (() => storage.get('id_token')),\r\n  }), http);\r\n}\r\n\r\nexport function createTranslateLoader(http: Http) {\r\n  return new TranslateHttpLoader(http, './assets/i18n/', '.json');\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MyApp\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    IonicModule.forRoot(MyApp),\r\n    IonicStorageModule.forRoot(),\r\n    HttpModule,\r\n    TranslateModule.forRoot({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: (createTranslateLoader),\r\n        deps: [Http]\r\n      }\r\n    })\r\n  ],\r\n  bootstrap: [IonicApp],\r\n  entryComponents: [\r\n    MyApp\r\n  ],\r\n  providers: [\r\n    StatusBar,\r\n    JwtHelper,\r\n    SplashScreen,\r\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\r\n    {\r\n      provide: AuthHttp,\r\n      useFactory: getAuthHttp,\r\n      deps: [Http]\r\n    },\r\n    AuthService,\r\n    BooksService\r\n  ]\r\n})\r\nexport class AppModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import {Component, ViewChild} from '@angular/core';\r\nimport {Nav, Platform} from 'ionic-angular';\r\nimport {StatusBar} from '@ionic-native/status-bar';\r\nimport {SplashScreen} from '@ionic-native/splash-screen';\r\nimport {AuthService} from '../providers/auth-service';\r\nimport {TranslateService} from '@ngx-translate/core';\r\n\r\n@Component({\r\n  templateUrl: 'app.html'\r\n})\r\nexport class MyApp {\r\n  @ViewChild(Nav) nav: Nav;\r\n\r\n  rootPage: any = 'ProfilePage';\r\n\r\n  pages: Array<{title: string, component: any, method?: any}>;\r\n\r\n  constructor(\r\n    public platform: Platform,\r\n    public statusBar: StatusBar,\r\n    public splashScreen: SplashScreen,\r\n    public authService: AuthService,\r\n    translate: TranslateService) {\r\n\r\n    this.initializeApp();\r\n\r\n    translate.setDefaultLang('en');\r\n\r\n    // used for an example of ngFor and navigation\r\n    this.pages = [\r\n      {title: 'page.profile', component: 'ProfilePage'},\r\n      {title: 'page.books.list', component: 'BooksPage'},\r\n      {title: 'page.logout', component: 'LoginPage', method: 'logout'}\r\n    ];\r\n\r\n  }\r\n\r\n  initializeApp() {\r\n    this.platform.ready().then(() => {\r\n      // Okay, so the platform is ready and our plugins are available.\r\n      // Here you can do any higher level native things you might need.\r\n      this.statusBar.styleDefault();\r\n      this.splashScreen.hide();\r\n      this.authService.startupTokenRefresh();\r\n    });\r\n  }\r\n\r\n  openPage(page) {\r\n\r\n    if (page.method && page.method === 'logout') {\r\n      this.authService.logout();\r\n    }\r\n\r\n    this.nav.setRoot(page.component);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts"],"sourceRoot":""}
